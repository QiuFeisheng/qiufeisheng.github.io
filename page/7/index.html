<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta name="description" content="Stay hungry">
<meta property="og:type" content="website">
<meta property="og:title" content="QiuFeisheng&#39;Blog">
<meta property="og:url" content="http://yoursite.com/page/7/index.html">
<meta property="og:site_name" content="QiuFeisheng&#39;Blog">
<meta property="og:description" content="Stay hungry">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="QiuFeisheng&#39;Blog">
<meta name="twitter:description" content="Stay hungry">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/7/">





  <title>QiuFeisheng'Blog</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">QiuFeisheng'Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/06/基础Demo6-Activity的4S启动模式/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="QiuFeisheng">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="QiuFeisheng'Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/04/06/基础Demo6-Activity的4S启动模式/" itemprop="url">基础Demo6-Activity的4S启动模式</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-04-06T00:00:00+08:00">
                2019-04-06
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="1、Standard"><a href="#1、Standard" class="headerlink" title="1、Standard"></a>1、Standard</h3><p>：默认的启动模式，一个Activity可以创建无限个实例</p>
<h3 id="2、SingleTop"><a href="#2、SingleTop" class="headerlink" title="2、SingleTop"></a>2、SingleTop</h3><p>：程序正处于当前Activity A时，即栈顶，用Intent再跳转到A，不会再创建A的实例，此时不能无限生成A,但是如果是ABC,跳转到A会再生成一个实例，最后是ABCA，此时这两个A是不一样的噢，特别是数据方面。</p>
<pre><code>&lt;activity
android:name=&quot;.Main2Activity&quot;
android:launchMode=&quot;singleTop&quot;&gt;
&lt;/activity&gt;
</code></pre><h3 id="3、SingleTask"><a href="#3、SingleTask" class="headerlink" title="3、SingleTask"></a>3、SingleTask</h3><p>： 简单粗暴，例如是ABC—-&gt;跳转到A，会直接将C,B finish掉，让A直接暴露在栈顶，此时就是运行状态onResume()</p>
<pre><code>&lt;activity
android:name=&quot;.Main2Activity&quot;
android:launchMode=&quot;singleTask&quot;&gt;
&lt;/activity&gt;
</code></pre><h3 id="4、SingleInstance"><a href="#4、SingleInstance" class="headerlink" title="4、SingleInstance"></a>4、SingleInstance</h3><p>: 独立的返回栈，对于要被其他程序共享调用的Activity，我们可以将该Activity的启动模式设置为SingleInstance， ABC—-C–A–B</p>
<pre><code>&lt;activity
android:name=&quot;.Main2Activity&quot;
android:launchMode=&quot;singleInstance&quot;&gt;
&lt;/activity&gt;
</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/05/基础Demo5-Activity意外回收保存数据/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="QiuFeisheng">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="QiuFeisheng'Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/04/05/基础Demo5-Activity意外回收保存数据/" itemprop="url">基础Demo5-Activity意外回收保存数据</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-04-05T00:00:00+08:00">
                2019-04-05
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="1、应用场景：Activity-A跳转到Activity-B-然后当系统内存不足的情况下，可能会回收Activity-A-所以当B-finish之后，回来的Activity-A的数据可能是重新初始化的，可能造成数据丢失。"><a href="#1、应用场景：Activity-A跳转到Activity-B-然后当系统内存不足的情况下，可能会回收Activity-A-所以当B-finish之后，回来的Activity-A的数据可能是重新初始化的，可能造成数据丢失。" class="headerlink" title="1、应用场景：Activity A跳转到Activity B,然后当系统内存不足的情况下，可能会回收Activity A,所以当B finish之后，回来的Activity A的数据可能是重新初始化的，可能造成数据丢失。"></a>1、应用场景：Activity A跳转到Activity B,然后当系统内存不足的情况下，可能会回收Activity A,所以当B finish之后，回来的Activity A的数据可能是重新初始化的，可能造成数据丢失。</h3><h3 id="2、Demo代码"><a href="#2、Demo代码" class="headerlink" title="2、Demo代码"></a>2、Demo代码</h3><pre><code>public static final String SAVE_KEY=&quot;save_key&quot;;
private String data;
......

//1、重写onSaveInstanceState, data---&gt;key---&gt;outState： key是快递，outState是快递车

@Override
protected void onSaveInstanceState(Bundle outState) {
super.onSaveInstanceState(outState);

outState.putString(SAVE_KEY,data);
}


//2、在onCreate()里面的savedInstanceState取值后再填充显示即可
@Override
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);

if (savedInstanceState!=null){
    String tempData=savedInstanceState.getString(SAVE_KEY);
    Log.d(&quot;保存的数据&quot;,tempData);
 }
initView();
initData();
}
</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/04/基础Demo4-Intent返回数据给上一个Activity/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="QiuFeisheng">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="QiuFeisheng'Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/04/04/基础Demo4-Intent返回数据给上一个Activity/" itemprop="url">基础Demo4-Intent返回数据给上一个Activity</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-04-04T00:00:00+08:00">
                2019-04-04
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="1、思路"><a href="#1、思路" class="headerlink" title="1、思路"></a>1、思路</h3><p> <img src="https://i.imgur.com/XfmouoW.jpg" alt></p>
<h3 id="2、Demo代码"><a href="#2、Demo代码" class="headerlink" title="2、Demo代码"></a>2、Demo代码</h3><p>（1）MainActivity.java</p>
<pre><code>@Override
public void onClick(View view) {

switch (view.getId()) {

    case R.id.btn_1:

        //构造对象：Intent对象
        Intent intent=new Intent(MainActivity.this,Main2Activity.class);
        //调用+ForResult，1是请求码，下一个接收的Activity会标记，返回的时候会一起返回 
       //因为跳转到N个Activity，我们可以根据请求码requestCode来区分是哪一个Activity

       //返回的数据回来   
       startActivityForResult(intent,1);

        break;
        default:break;
    }
 }

  @Override
  protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {

//请求码区分是哪一个Activity返回的数据，其实都是自己设置的
switch (requestCode){

    case 1:
 //根据结果码来判断是否返回成功，再开始取数据
        if (resultCode==RESULT_OK){
            //data.getXXXExtra(key)；
            String data1=data.getStringExtra(Main2Activity.DATA_RETURN);
            mTextView.setText(data1);

        }
    }
}
</code></pre><p>（2）Main2Activity</p>
<pre><code>//finish前面携带在intent中即可，结果码一般都是RESULT_OK不用改
@Override
public void onClick(View view) {

data=&quot;I am spider man&quot;;
Intent intent=new Intent();
intent.putExtra(DATA_RETURN,data);
setResult(RESULT_OK,intent);
finish();
}

//重写返回键back键
@Override
public void onBackPressed() {
data=&quot;I am spider man&quot;;
Intent intent=new Intent();
intent.putExtra(DATA_RETURN,data);
setResult(RESULT_OK,intent);
finish();
}
</code></pre><p>//常量作为Key的好处是： 可以在多个类多处调用，而且取值的时候不会出现手写key错误的概率</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/03/基础Demo3-Intent传递数据/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="QiuFeisheng">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="QiuFeisheng'Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/04/03/基础Demo3-Intent传递数据/" itemprop="url">基础Demo3-Intent传递数据</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-04-03T00:00:00+08:00">
                2019-04-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="1、思路"><a href="#1、思路" class="headerlink" title="1、思路"></a>1、思路</h3><p>  <img src="https://i.imgur.com/HtXWRlH.jpg" alt></p>
<h3 id="2、Demo代码"><a href="#2、Demo代码" class="headerlink" title="2、Demo代码"></a>2、Demo代码</h3><p>（1）MainActivity.java</p>
<pre><code>......
public static final String DATA_KEY=&quot;data_key&quot;;
private String data;
......

@Override
public void onClick(View view) {

switch (view.getId()) {

    case R.id.btn_1:

        //一般写成全局变量field比较好
         data=&quot;I am iron man&quot;;

        //构造对象：Intent对象
        Intent intent=new Intent(MainActivity.this,Main2Activity.class);
        //将数据打包存储到key，再通过快递车intent一起发送到下一个Activity
        intent.putExtra(DATA_KEY,data);
        //开车
        startActivity(intent);

        break;
        default:break;
   }
}
</code></pre><p>(2)Main2Activity.java</p>
<pre><code>public class Main2Activity extends AppCompatActivity {

private TextView mTextView;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main2);

    mTextView=(TextView)findViewById(R.id.tv_content);

    //构造Intent对象：去快递车
    Intent intent=getIntent();
    //从快递车的快递包裹DATA_KEY取值
    String data=intent.getStringExtra(MainActivity.DATA_KEY);
    //填充Data显示到view
    mTextView.setText(data);
   }
}
</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/02/基础Demo2-隐式Intent的使用/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="QiuFeisheng">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="QiuFeisheng'Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/04/02/基础Demo2-隐式Intent的使用/" itemprop="url">基础Demo2-隐式Intent的使用</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-04-02T00:00:00+08:00">
                2019-04-02
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="1、思路"><a href="#1、思路" class="headerlink" title="1、思路"></a>1、思路</h3><p> <img src="https://i.imgur.com/gBw8NM9.jpg" alt></p>
<h3 id="2、Demo代码"><a href="#2、Demo代码" class="headerlink" title="2、Demo代码"></a>2、Demo代码</h3><p>(1)activity_main.xml</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;LinearLayout
xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
android:layout_width=&quot;match_parent&quot;
android:layout_height=&quot;match_parent&quot;
android:orientation=&quot;vertical&quot;&gt;

&lt;Button
    android:id=&quot;@+id/btn_1&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;wrap_content&quot;
    android:text=&quot;打开系统浏览器&quot;/&gt;

&lt;Button
    android:id=&quot;@+id/btn_2&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;wrap_content&quot;
    android:text=&quot;打开系统电话&quot;/&gt;

&lt;/LinearLayout&gt;
</code></pre><p>（2）MainActivity.java</p>
<pre><code>import android.content.Intent;
import android.net.Uri;
import android.support.v7.app.AppCompatActivity;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;

public class MainActivity extends AppCompatActivity implements View.OnClickListener {

private Button btn_1;
private Button btn_2;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    initView();
    initData();
}

private void initView() {

   btn_1= (Button) findViewById(R.id.btn_1);
   btn_2= (Button) findViewById(R.id.btn_2);
}

private void initData() {

    btn_1.setOnClickListener(this);
    btn_2.setOnClickListener(this);
}
@Override
public void onClick(View view) {

     switch (view.getId()){

         case R.id.btn_1:
             //1、传入隐式Intent的action值，构造Intent对象
             //action值一般是传入Android系统可以响应的action值
             //当然也可以在某个Activity的action值配置Intent-filter就可以响应此Intent
             Intent intent=new Intent(Intent.ACTION_VIEW);

             //调用象方：initData()，传入Uri对象
             intent.setData(Uri.parse(&quot;http://www.baidu.com&quot;));

             //开启可以响应此Intent的Activity(可能是系统应用的Activity)
             startActivity(intent);
             break;

         case R.id.btn_2:
             Intent intent2=new Intent(Intent.ACTION_DIAL);
             intent2.setData(Uri.parse(&quot;tel:15622391415&quot;));
             startActivity(intent2);
             break;
     }  }
}
</code></pre><h3 id="3、常用的action值"><a href="#3、常用的action值" class="headerlink" title="3、常用的action值"></a>3、常用的action值</h3><pre><code>// 调用浏览器 
Uri webViewUri = Uri.parse(&quot;http://blog.csdn.net/zuolongsnail&quot;); 
Intent intent = new Intent(Intent.ACTION_VIEW, webViewUri); 

// 调用地图 
Uri mapUri = Uri.parse(&quot;geo:100,100&quot;); 
Intent intent = new Intent(Intent.ACTION_VIEW, mapUri); 

// 播放mp3 
Uri playUri = Uri.parse(&quot;file:///sdcard/test.mp3&quot;); 
Intent intent = new Intent(Intent.ACTION_VIEW, playUri); 
intent.setDataAndType(playUri, &quot;audio/mp3&quot;); 


// 调用拨打电话 
Uri dialUri = Uri.parse(&quot;tel:10086&quot;); 
Intent intent = new Intent(Intent.ACTION_DIAL, dialUri); 

// 直接拨打电话，需要加上权限
&lt;uses-permission id=&quot;android.permission.CALL_PHONE&quot; /&gt; 
Uri callUri = Uri.parse(&quot;tel:10086&quot;); 
Intent intent = new Intent(Intent.ACTION_CALL, callUri); 

// 调用发邮件（这里要事先配置好的系统Email，否则是调不出发邮件界面的） 
Uri emailUri = Uri.parse(&quot;mailto:zuolongsnail@163.com&quot;); 
Intent intent = new Intent(Intent.ACTION_SENDTO, emailUri); 

// 直接发邮件 
Intent intent = new Intent(Intent.ACTION_SEND); 
String[] tos = { &quot;zuolongsnail@gmail.com&quot; }; 
String[] ccs = { &quot;zuolongsnail@163.com&quot; }; 
intent.putExtra(Intent.EXTRA_EMAIL, tos); 
intent.putExtra(Intent.EXTRA_CC, ccs); 
intent.putExtra(Intent.EXTRA_TEXT, &quot;the email text&quot;); 
intent.putExtra(Intent.EXTRA_SUBJECT, &quot;subject&quot;); 
intent.setType(&quot;text/plain&quot;); 
Intent.createChooser(intent, &quot;Choose Email Client&quot;); 

// 发短信 
Intent intent = new Intent(Intent.ACTION_VIEW); 
intent.putExtra(&quot;sms_body&quot;, &quot;the sms text&quot;); 
intent.setType(&quot;vnd.android-dir/mms-sms&quot;); 

// 直接发短信 
Uri smsToUri = Uri.parse(&quot;smsto:10086&quot;); 
Intent intent = new Intent(Intent.ACTION_SENDTO, smsToUri); 
intent.putExtra(&quot;sms_body&quot;, &quot;the sms text&quot;); 

// 发彩信 
Uri mmsUri = Uri.parse(&quot;content://media/external/images/media/23&quot;); 
Intent intent = new Intent(Intent.ACTION_SEND); 
intent.putExtra(&quot;sms_body&quot;, &quot;the sms text&quot;); 
intent.putExtra(Intent.EXTRA_STREAM, mmsUri); 
intent.setType(&quot;image/png&quot;); 

// 卸载应用 
Uri uninstallUri = Uri.fromParts(&quot;package&quot;, &quot;com.app.test&quot;, null); 
Intent intent = new Intent(Intent.ACTION_DELETE, uninstallUri); 

// 安装应用 
Intent intent = new Intent(Intent.ACTION_VIEW); 
intent.setDataAndType(Uri.fromFile(new File(&quot;/sdcard/test.apk&quot;), &quot;application/vnd.android.package-archive&quot;); 

// 在Android Market中查找应用 
Uri uri = Uri.parse(&quot;market://search?q=愤怒的小鸟&quot;);          
Intent intent = new Intent(Intent.ACTION_VIEW, uri);
</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/01/基础Demo1--菜单Menu/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="QiuFeisheng">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="QiuFeisheng'Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/04/01/基础Demo1--菜单Menu/" itemprop="url">基础Demo1-菜单Menu</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-04-01T00:00:00+08:00">
                2019-04-01
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="1、创建item-menu-xml"><a href="#1、创建item-menu-xml" class="headerlink" title="1、创建item_menu.xml"></a>1、创建item_menu.xml</h3><p>：res右键—&gt;Directory—&gt;menu—&gt;item_menu.xml</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;menu xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;

&lt;item
    android:id=&quot;@+id/scan_item&quot;
    android:title=&quot;扫一扫&quot;/&gt;

&lt;item
    android:id=&quot;@+id/friend_item&quot;
    android:title=&quot;添加朋友&quot;/&gt;

&lt;item
    android:id=&quot;@+id/pay_item&quot;
    android:title=&quot;收付款&quot;/&gt;

&lt;/menu&gt;
</code></pre><h3 id="2、在Activity中重写两个Menu的回调方法"><a href="#2、在Activity中重写两个Menu的回调方法" class="headerlink" title="2、在Activity中重写两个Menu的回调方法"></a>2、在Activity中重写两个Menu的回调方法</h3><p>：（1）onCreateOptionsMenu()，初始化菜单item</p>
<p>：（2）onOptionsItemSelected（），子项选中后的逻辑</p>
<pre><code>import android.support.v7.app.AppCompatActivity;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuItem;
import android.widget.Toast;

public class MainActivity extends AppCompatActivity {


@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    //调用象方：初始化布局
    setContentView(R.layout.activity_main);
}



//初始化菜单item为view对象
@Override
public boolean onCreateOptionsMenu(Menu menu) {

    //调用象方：构造item_view对象，初始化item布局，参数menu是加载该view的位置，直接使用形参的menu，不用改
    getMenuInflater().inflate(R.menu.item_menu,menu);

    //ture的处理结果是可以显示菜单
    return true;
}

//触摸结果的处理方法，在Android系统的触摸监听里被回调
@Override
public boolean onOptionsItemSelected(MenuItem item) {

    //在触摸回调的时候系统会传入监听到的item对象，我们根据id值来鉴别每个item
    //要时刻记住我们的职责是构造处理类方法，不需要我们调用，是系统调用
    //所以我们关键是写对方法名和形参类型，实际数据是系统自己调用时，自己传进去使用，不需要给我们
    switch (item.getItemId()){

        case R.id.scan_item:

            Toast.makeText(this,&quot;扫一扫&quot;,Toast.LENGTH_SHORT).show();
            break;

        case R.id.friend_item:
            Toast.makeText(this,&quot;添加朋友&quot;,Toast.LENGTH_SHORT).show();
            break;

        case R.id.pay_item:
            Toast.makeText(this,&quot;收付款&quot;,Toast.LENGTH_SHORT).show();
            break;

            default:break;
    }
    //true理解为可以执行
    return true;
  }

}
</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/03/12/tomcat/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="QiuFeisheng">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="QiuFeisheng'Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/03/12/tomcat/" itemprop="url">后台03：Tomcat基础</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-03-12T00:00:00+08:00">
                2019-03-12
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="1-程序架构"><a href="#1-程序架构" class="headerlink" title="1.程序架构"></a>1.程序架构</h4><ul>
<li><p>C/S架构(client/server)：含有客户端或移动端的就是C/S架构</p>
<p><img src="/2019/03/12/tomcat/1.png" alt></p>
</li>
</ul>
<blockquote>
<p>QQ 微信 LOL</p>
</blockquote>
<p>优点：</p>
<pre><code>有一部分代码写在客户端， 用户体验比较好。 
</code></pre><p>缺点： </p>
<pre><code>服务器更新，客户端也要随着更新。 占用资源大。 客户端也要更新是因为客户端里的各种请求代码，请求接口或者解析代码是与服务器配套的，就类似一个锁和一把钥匙，锁里面的凹槽改变了，钥匙当然要改一下尺度，所以需要更新！要不然开不了锁。
</code></pre><ul>
<li><p>B/S(browser/server)：用浏览器打开网页的就是B/S架构，很容易区分</p>
<p><img src="/2019/03/12/tomcat/2.png" alt></p>
</li>
</ul>
<blockquote>
<p>网页游戏 ， WebQQ …（跟网页有关的都是B/S架构）</p>
</blockquote>
<p>优点： </p>
<pre><code>客户端只要有浏览器就可以了。占用资源小， 不用更新。因为浏览器自带解析功能和请求功能，服务器改变不会改变对接方式和请求方式，内部数据交互是在前端网页更新写好了，所以到了浏览器这里当然不用更新。
</code></pre><p>缺点：</p>
<pre><code>用户体验不佳。 
</code></pre><p>###Tomcat目录介绍</p>
<p>bin##</p>
<pre><code>&gt; 包含了一些jar ,  bat文件 。  startup.bat
</code></pre><p>conf##<br>​<br>        tomcat的配置     server.xml  web.xml</p>
<p>lib </p>
<pre><code>tomcat运行所需的jar文件
</code></pre><p>logs</p>
<pre><code>运行的日志文件
</code></pre><p>temp</p>
<pre><code>临时文件
</code></pre><p>webapps##</p>
<pre><code>发布到tomcat服务器上的项目，就存放在这个目录。    
</code></pre><p>work(目前不用管)</p>
<pre><code>jsp翻译成class文件存放地
</code></pre><p>​    </p>
<p>##如何把一个项目发布到tomcat中</p>
<blockquote>
<p>需求： 如何能让其他的电脑访问我这台电脑上的资源 。 stu.xml</p>
</blockquote>
<pre><code>localhost : 本机地址
</code></pre><h3 id="1-拷贝这个文件到webapps-ROOT底下，-在浏览器里面访问："><a href="#1-拷贝这个文件到webapps-ROOT底下，-在浏览器里面访问：" class="headerlink" title="1.拷贝这个文件到webapps/ROOT底下， 在浏览器里面访问："></a>1.拷贝这个文件到webapps/ROOT底下， 在浏览器里面访问：</h3><pre><code>    http://localhost:8080/stu.xml

* 在webaps下面新建一个文件夹xml  , 然后拷贝文件放置到这个文件夹中
</code></pre><p>​<br>        <a href="http://localhost:8080/xml/stu.xml" target="_blank" rel="noopener">http://localhost:8080/xml/stu.xml</a></p>
<pre><code>http://localhost:8080 ： 其实对应的是到webapps/root
http://localhost:8080/xml/ : 对应是 webapps/xml

使用IP地址访问：

http://192.168.37.48:8080/xml/stu.xml
</code></pre><h3 id="2-配置虚拟路径"><a href="#2-配置虚拟路径" class="headerlink" title="2.配置虚拟路径"></a>2.配置虚拟路径</h3><p>使用localhost：8080 打开tomcat首页， 在左侧找到tomcat的文档入口， 点击进去后， 在左侧接着找到 Context入口，点击进入。</p>
<pre><code>http://localhost:8080/docs/config/context.html
</code></pre><ol>
<li><p>在conf/server.xml 找到host元素节点。</p>
</li>
<li><p>加入以下内容。</p>
</li>
</ol>
<pre><code>&lt;!-- docBase ：  项目的路径地址 如： D:\xml02\person.xml
path : 对应的虚拟路径 一定要以/打头。
对应的访问方式为： http://localhost:8080/a/person.xml --&gt;
&lt;Context docBase=&quot;D:\xml02&quot; path=&quot;/a&quot;&gt;&lt;/Context&gt;
</code></pre><ol start="3">
<li>在浏览器地址栏上输入： <a href="http://localhost:8080/a/person.xml" target="_blank" rel="noopener">http://localhost:8080/a/person.xml</a></li>
</ol>
<h3 id="3-配置虚拟路径"><a href="#3-配置虚拟路径" class="headerlink" title="3.配置虚拟路径"></a>3.配置虚拟路径</h3><ol>
<li><p>在tomcat/conf/catalina/localhost/ 文件夹下新建一个xml文件，名字可以自己定义。 person.xml</p>
</li>
<li><p>在这个文件里面写入以下内容</p>
<pre><code>&lt;?xml version=&apos;1.0&apos; encoding=&apos;utf-8&apos;?&gt;
&lt;Context docBase=&quot;D:\xml02&quot;&gt;&lt;/Context&gt;
</code></pre></li>
<li><p>在浏览器上面访问</p>
<p><a href="http://localhost:8080/person/xml的名字即可" target="_blank" rel="noopener">http://localhost:8080/person/xml的名字即可</a></p>
</li>
</ol>
<h3 id="给Eclipse配置Tomcat"><a href="#给Eclipse配置Tomcat" class="headerlink" title="给Eclipse配置Tomcat"></a>给Eclipse配置Tomcat</h3><ol>
<li>在server里面 右键新建一个服务器， 选择到apache分类， 找到对应的tomcat版本， 接着一步一步配置即可。</li>
<li><p>配置完毕后， 在server 里面， 右键刚才的服务器，然后open  ， 找到上面的Server Location , 选择中间的 Use Tomcat installation…</p>
</li>
<li><p>创建web工程， 在WebContent下定义html文件， 右键工程， run as server </p>
</li>
</ol>
<h3 id="在Ecplise下创建Web过程的步骤："><a href="#在Ecplise下创建Web过程的步骤：" class="headerlink" title="在Ecplise下创建Web过程的步骤："></a>在Ecplise下创建Web过程的步骤：</h3><p>   New—&gt;other—&gt;Web—&gt;Dynamic Web Project—&gt;Next—&gt;Moudle_Version3.0—&gt;Next……</p>
<p>   然后新建html网页，run Server之后，该Web项目会存储在Tomcat的wtpwebapps目录中</p>
<p>   <img src="/2019/03/12/tomcat/3.png" alt></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/03/11/JDBC基础Demo/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="QiuFeisheng">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="QiuFeisheng'Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/03/11/JDBC基础Demo/" itemprop="url">后台02：JDBC基础Demo</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-03-11T00:00:00+08:00">
                2019-03-11
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="1、JDBC视角"><a href="#1、JDBC视角" class="headerlink" title="1、JDBC视角"></a>1、JDBC视角</h3><p>（1）JDBC的作用就是实现：JAVA可以操作数据库；用JAVA代码的形式操作数据库，而不是直接通过命令行或者GUI来操作数据库，这是另外一种操作形式；</p>
<p>（2）sun公司提供了JDBC驱动为载体，应用层的开发人员通过JDBC驱动，便能与各种数据库交互，而不再是每种数据库写一套交互代码框架，提高开发效率，要不然真的很烦；</p>
<p> <img src="/2019/03/11/JDBC基础Demo/1.png" alt></p>
<p> <img src="/2019/03/11/JDBC基础Demo/2.png" alt></p>
<h3 id="2、JDBC-Debug感受：版本不兼容，使用方式发生改变"><a href="#2、JDBC-Debug感受：版本不兼容，使用方式发生改变" class="headerlink" title="2、JDBC Debug感受：版本不兼容，使用方式发生改变"></a>2、JDBC Debug感受：版本不兼容，使用方式发生改变</h3><p>（1）MySQL在安装的时候，注意特定文件的配置，服务的开启与关闭，版本问题；</p>
<p>（2）JDBC一直报错的原因：JDBC驱动和MySQL的版本根本不对接的问题，很多小细节一改变，配置方式和使用方式就会发生改变；所以Debug的时候，版本不兼容以后也要成为一种思考的思路，然后Google搜索特定版本的使用方式，根据Demo来使用就可以了；</p>
<h3 id="Demo1"><a href="#Demo1" class="headerlink" title="Demo1"></a>Demo1</h3><p>（1）导入JDBC驱动jar包，注意jar包版本要与数据库版本对接，而且调用方式有区别；</p>
<p>（2）new–&gt;lib—&gt;粘贴jar包—&gt;右键add to Buidth—&gt;才能开始使用；</p>
<p>（3）API使用方式根据最新用法</p>
<pre><code>import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.sql.Connection;


public class MainTest {

public static void main(String[] args) {

    try {

        //1、注册驱动
        DriverManager.registerDriver(new com.mysql.cj.jdbc.Driver());

        String url=&quot;jdbc:mysql://localhost:3306/jdbc?useUnicode=true&amp;characterEncoding=utf-8&amp;serverTimezone=GMT&quot;;
        String user=&quot;root&quot;;
        String passward=&quot;8875696127m&quot;;

        //2、建立连接：（协议：数据库地址，用户名，密码）
        Connection conn= DriverManager.getConnection(url,user,passward);

        //3、拿到状态对象来与数据库交互
        Statement state=conn.createStatement();

        //4、尝试查询，ResultSet类似一个JavaBean，可以从getter和key中拿到表的每个对象的数据
        String sql=&quot;select * from students&quot;;
        ResultSet res=state.executeQuery(sql);

        //5、结果集类似从JavaBean拿数据并显示出来
        while(res.next()) {

            int id=res.getInt(&quot;id&quot;);
            String name=res.getString(&quot;name&quot;);
            int age=res.getInt(&quot;age&quot;);

            System.out.println(&quot;id= &quot;+id+&quot;  &quot;+&quot;name= &quot;+name+&quot;  &quot;+&quot;age= &quot;+age);

        }

        //从下往上关闭服务，类似IO流
        res.close();
        state.close();
        conn.close();


    } catch (SQLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        }        
    }
}
</code></pre><p>（4）二次封装和重构最终版</p>
<pre><code>import java.io.InputStream;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.util.Properties;

public class JDBCUtil {

//读取xxx.properties文件来填充，习惯性写法
static String driverClass = null;
static String url = null;
static String user = null;
static String password= null;
static{
    try {
        //1. 创建一个属性配置对象
        Properties properties = new Properties();
        //使用类加载器，去读取src底下的资源文件。 后面在servlet
        InputStream is = JDBCUtil.class.getClassLoader().getResourceAsStream(&quot;pass.properties&quot;);
        //导入输入流。
        properties.load(is);

        //读取属性
        driverClass = properties.getProperty(&quot;driverClass&quot;);
        url = properties.getProperty(&quot;url&quot;);
        user = properties.getProperty(&quot;user&quot;);
        password = properties.getProperty(&quot;password&quot;);

    } catch (Exception e) {
        e.printStackTrace();
    }
}



/**
 * 获取连接对象
 * @return
 */
public static Connection getConn(){
    Connection conn = null;
    try {

        //静态代码块 ---&gt; 类加载了，就执行。 java.sql.DriverManager.registerDriver(new Driver());
        Class.forName(driverClass);

        conn = DriverManager.getConnection(url, user, password);

    } catch (Exception e) {
        e.printStackTrace();
    }
    return conn;
}



//释放资源
public static void release(ResultSet res,Statement state,Connection conn) {

    closeRes(res);
    closeState(state);
    closeConnection(conn);
}

private static void closeRes(ResultSet res) {

    try {
        if(res!=null) {
            res.close();
        }

    } catch (SQLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }finally {
        res=null;
    }
}


private static void closeState(Statement state) {

    try {
        if(state!=null) {
            state.close();
        }

    } catch (SQLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }finally {
        state=null;
    }
}


private static void closeConnection(Connection conn) {

try {
    if(conn!=null) {
        conn.close();
    }

} catch (SQLException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}finally {
    conn=null;
        }
    }


}
</code></pre><p>MainTest</p>
<pre><code>import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import com.qiufeisheng.util.JDBCUtil;
import java.sql.Connection;

public class MainTest {

public static void main(String[] args) {

    Connection conn=null;
    Statement state=null;
    ResultSet res=null;


    try {

        //1、注册驱动；2、建立连接，都抽取在JDBCUtil中读取
         conn= JDBCUtil.getConn();

        //3、拿到状态对象来与数据库交互
        state=conn.createStatement();

        //4、尝试查询，ResultSet类似一个JavaBean，可以从getter和key中拿到表的每个对象的数据
        String sql=&quot;select * from students&quot;;
        res=state.executeQuery(sql);

        //5、类似从JavaBean拿数据并显示出来
        while(res.next()) {

            int id=res.getInt(&quot;id&quot;);
            String name=res.getString(&quot;name&quot;);
            int age=res.getInt(&quot;age&quot;);

            System.out.println(&quot;id= &quot;+id+&quot;  &quot;+&quot;name= &quot;+name+&quot;  &quot;+&quot;age= &quot;+age);

        }


    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }finally {

    JDBCUtil.release(res, state, conn);
        }    
    }
}
</code></pre><p>1驱动、2连接、3state、4result、5get、6close</p>
<h3 id="Demo2-JDBC实现CRUD的查询（用JUnit单元测试）"><a href="#Demo2-JDBC实现CRUD的查询（用JUnit单元测试）" class="headerlink" title="Demo2: JDBC实现CRUD的查询（用JUnit单元测试）"></a>Demo2: JDBC实现CRUD的查询（用JUnit单元测试）</h3><p>（1）导入jar包的方式：工程目录–》右键新建Folder—》lib–》粘贴jar包—》右键Add build to path<br>（2）导入junit包的方式：工程目录–》右键Build Path—》Add libraies—》JUnit—》finish<br>（3）方法上面+ @Test：然后点击右上角的outline—&gt;选择方法进行JUnit测试（窗口视图乱了，有上角的java就可以Reset恢复窗口）</p>
<pre><code>import java.sql.Connection;
import java.sql.ResultSet;
import java.sql.Statement;
import org.junit.Test;
import com.qiufeisheng.util.JDBCUtil;

public class JUnitTest {

@Test
public void testQuery() {

    Connection conn=null;
    Statement state=null;
    ResultSet res=null;

    try {
        //注册+连接+获取连接对象
         conn = JDBCUtil.getConn();

        //获取state对象与数据库交互
         state = conn.createStatement();

        //state执行sql语句
        String sql=&quot;select * from students&quot;;
         res=state.executeQuery(sql);

        //遍历读取
        while(res.next()) {

            String name=res.getString(&quot;name&quot;);
            int age=res.getInt(&quot;age&quot;);

            System.out.println(name+&quot;  &quot;+age);
        }


    } catch (Exception e) {
        e.printStackTrace();
    }finally {
        JDBCUtil.release(res, state, conn);
    }
    }
}
</code></pre><h3 id="Demo3-JDBC实现CRUD的添加（用JUnit单元测试）"><a href="#Demo3-JDBC实现CRUD的添加（用JUnit单元测试）" class="headerlink" title="Demo3: JDBC实现CRUD的添加（用JUnit单元测试）"></a>Demo3: JDBC实现CRUD的添加（用JUnit单元测试）</h3><pre><code>@Test
public void testInsert() {



    Connection conn=null;
    Statement state=null;

    try {
        //注册+连接+获取连接对象
         conn = JDBCUtil.getConn();

        //获取state对象与数据库交互
         state = conn.createStatement();

        //state执行sql语句
        String sql=&quot;INSERT INTO students VALUES(null,&apos;feifei&apos;,22)&quot;;
         int res=state.executeUpdate(sql);

        if(res&gt;0) {
            System.out.println(&quot;更新成功&quot;);
        }else {
            System.out.println(&quot;更新失败&quot;);
        }


    } catch (Exception e) {
        e.printStackTrace();
    }finally {
        JDBCUtil.release(state, conn);
    }
}
</code></pre><h3 id="Demo4-JDBC实现CRUD的删除和更新（用JUnit单元测试）"><a href="#Demo4-JDBC实现CRUD的删除和更新（用JUnit单元测试）" class="headerlink" title="Demo4:JDBC实现CRUD的删除和更新（用JUnit单元测试）"></a>Demo4:JDBC实现CRUD的删除和更新（用JUnit单元测试）</h3><pre><code>    //删除

@Test
public void testDelete() {

    Connection conn=null;
    Statement state=null;

    try {
        //注册+连接+获取连接对象
         conn = JDBCUtil.getConn();

        //获取state对象与数据库交互
         state = conn.createStatement();

        //state执行sql语句
        String sql=&quot;DELETE FROM students WHERE name=&apos;feifei&apos;&quot;;
         int res=state.executeUpdate(sql);

        if(res&gt;0) {
            System.out.println(&quot;删除成功&quot;);
        }else {
            System.out.println(&quot;删除失败&quot;);
        }        

    } catch (Exception e) {
        e.printStackTrace();
    }finally {
        JDBCUtil.release(state, conn);
    }
}




//更新数据
@Test
public void testUpdate() {


    Connection conn=null;
    Statement state=null;

    try {
        //注册+连接+获取连接对象
         conn = JDBCUtil.getConn();

        //获取state对象与数据库交互
         state = conn.createStatement();

        //state执行sql语句
        String sql=&quot;UPDATE students set age=10 WHERE name=&apos;xiaoming&apos;&quot;;
         int res=state.executeUpdate(sql);

        if(res&gt;0) {
            System.out.println(&quot;更新成功&quot;);
        }else {
            System.out.println(&quot;更新失败&quot;);
        }


    } catch (Exception e) {
        e.printStackTrace();
    }finally {
        JDBCUtil.release(state, conn);
    }
}
</code></pre><h3 id="DAO模式的思想：DAO-Data-Access-Objects-封装接口和API"><a href="#DAO模式的思想：DAO-Data-Access-Objects-封装接口和API" class="headerlink" title="DAO模式的思想：DAO==Data Access Objects==封装接口和API"></a>DAO模式的思想：DAO==Data Access Objects==封装接口和API</h3><p>（1）就是把数据库的数据CRUD操作封装，提供接口给用户直接调用；<br>（2）好处：1是开发的时候用利于分工合作，解耦，各自完成特定接口的实现类，不用挤在一个类里面实现；2是封装数据库操作，符合对内封闭，对外开放原则；<br>（3）直接new一个实现类对象，然后调用API就可以实现数据库的操作了，啥都不用做；</p>
<pre><code>public interface UserDao {

    /**
     * 查询
     */
    void findAll();

}


import java.sql.Connection;
import java.sql.ResultSet;
import java.sql.Statement;
import com.qiufeisheng.dao.UserDao;
import com.qiufeisheng.util.JDBCUtil;;
public class UserDaoImple implements UserDao {

@Override
public void findAll() {
    // TODO Auto-generated method stub

    Connection conn=null;
    Statement state=null;
    ResultSet res=null;

    try {
        //注册+连接+获取连接对象
         conn = JDBCUtil.getConn();

        //获取state对象与数据库交互
         state = conn.createStatement();

        //state执行sql语句
        String sql=&quot;select * from students&quot;;
         res=state.executeQuery(sql);

        //遍历读取
        while(res.next()) {

            String name=res.getString(&quot;name&quot;);
            int age=res.getInt(&quot;age&quot;);

            System.out.println(name+&quot;  &quot;+age);
        }


    } catch (Exception e) {
        e.printStackTrace();
    }finally {
        JDBCUtil.release(res, state, conn);
    }
}

}


import org.junit.Test;
import com.qiufeisheng.daoimple.UserDaoImple;

public class TestDemo {

@Test
public void testDao() {

    UserDaoImple user=new UserDaoImple();
    user.findAll();
    }

}
</code></pre><h3 id="DAO模式下验证用户登录"><a href="#DAO模式下验证用户登录" class="headerlink" title="DAO模式下验证用户登录"></a>DAO模式下验证用户登录</h3><p>接口：UserDao.java</p>
<pre><code>public interface UserDao {

/**
 * 查询
 */
void findAll();

void login(String username,String password);
}
</code></pre><p>接口实现类：UserDaoImple.java</p>
<pre><code>import java.sql.Connection;
import java.sql.ResultSet;
import java.sql.Statement;
import com.qiufeisheng.dao.UserDao;
import com.qiufeisheng.util.JDBCUtil;;
public class UserDaoImple implements UserDao {

@Override
public void findAll() {
    // TODO Auto-generated method stub

    Connection conn=null;
    Statement state=null;
    ResultSet res=null;

    try {
        //注册+连接+获取连接对象
         conn = JDBCUtil.getConn();

        //获取state对象与数据库交互
         state = conn.createStatement();

        //state执行sql语句
        String sql=&quot;select * from infomation&quot;;
         res=state.executeQuery(sql);

        //遍历读取
        while(res.next()) {

            String username=res.getString(&quot;username&quot;);
            String password=res.getString(&quot;password&quot;);

            System.out.println(username+&quot; &quot;+password);
        }


    } catch (Exception e) {
        e.printStackTrace();
    }finally {
        JDBCUtil.release(res, state, conn);
    }
}

@Override
public void login(String username, String password) {
    // TODO Auto-generated method stub

    Connection conn=null;
    Statement state=null;
    ResultSet res=null;

    try {
        //注册+连接+获取连接对象
         conn = JDBCUtil.getConn();

        //获取state对象与数据库交互
         state = conn.createStatement();

        //state执行sql语句: 双引号和+的作用是将username变成String
        String sql=&quot;select * from infomation WHERE username=&apos;&quot;+username+&quot;&apos; AND password=&apos;&quot;+password+&quot;&apos;&quot;;
         res=state.executeQuery(sql);

        //遍历读取
        if(res.next()) {

            System.out.println(&quot;登录成功&quot;);
        }else {
            System.out.println(&quot;登录失败&quot;);
        }


    } catch (Exception e) {
        e.printStackTrace();
    }finally {
        JDBCUtil.release(res, state, conn);
        }

    }

}
</code></pre><p>单元测试类：TestDemo.java</p>
<pre><code>import org.junit.Test;
import com.qiufeisheng.daoimple.UserDaoImple;

public class TestDemo {

@Test
public void testDao() {

    UserDaoImple user=new UserDaoImple();
    user.findAll();
}


@Test
public void testLogin() {

    UserDaoImple user=new UserDaoImple();
    user.login(&quot;xiaohong&quot;, &quot;456&quot;);
    }
}
</code></pre><h4 id="Statement安全问题"><a href="#Statement安全问题" class="headerlink" title="Statement安全问题"></a>Statement安全问题</h4><p>:Statement执行 ，其实是拼接sql语句的。  先拼接sql语句，然后在一起执行。 </p>
<p>最坑的是用户输入的String若含有关键字，会被自动识别当做关键字来使用；</p>
<pre><code>String sql = &quot;select * from t_user where username=&apos;&quot;+ username  +&quot;&apos; and password=&apos;&quot;+ password +&quot;&apos;&quot;;

UserDao dao = new UserDaoImpl();
dao.login(&quot;admin&quot;, &quot;100234khsdf88&apos; or &apos;1=1&quot;);

SELECT * FROM t_user WHERE username=&apos;admin&apos; AND PASSWORD=&apos;100234khsdf88&apos; or &apos;1=1&apos; 

前面先拼接sql语句， 如果变量里面带有了 数据库的关键字，那么一并认为是关键字。 不认为是普通的字符串。 
rs = st.executeQuery(sql);
</code></pre><h3 id="PreparedStatement解决：改一下实现类的查询，将交互载体Statement升级为PreparedStatement，可以解决关键字的问题"><a href="#PreparedStatement解决：改一下实现类的查询，将交互载体Statement升级为PreparedStatement，可以解决关键字的问题" class="headerlink" title="PreparedStatement解决：改一下实现类的查询，将交互载体Statement升级为PreparedStatement，可以解决关键字的问题"></a>PreparedStatement解决：改一下实现类的查询，将交互载体Statement升级为PreparedStatement，可以解决关键字的问题</h3><pre><code>@Override
public void login(String username, String password) {
    // TODO Auto-generated method stub

    Connection conn=null;
    Statement state=null;
    ResultSet res=null;

    try {
        //注册+连接+获取连接对象
         conn = JDBCUtil.getConn();

        //获取state对象与数据库交互
        //state执行sql语句: 双引号和+的作用是将username变成String
        String sql=&quot;select * from infomation WHERE username= ? AND password=?&quot;;
         PreparedStatement ps=conn.prepareStatement(sql);
        ps.setString(1,username);
        ps.setString(2, password);

         res=ps.executeQuery();

        //遍历读取
        if(res.next()) {

            System.out.println(&quot;登录成功&quot;);
        }else {
            System.out.println(&quot;登录失败&quot;);
        }


    } catch (Exception e) {
        e.printStackTrace();
    }finally {
        JDBCUtil.release(res, state, conn);
    }

}
</code></pre><p>PreparedStatement实现向数据库insert数据</p>
<pre><code>//（1）接口
public interface UserDao {

/**
 * 查询
 */
void findAll();

void login(String username,String password);

//插入用户名和密码
void insert(String username,String password);
}



//（2）实现类向数据库插入数据
@Override
public void insert(String username, String password) {
    // TODO Auto-generated method stub



    Connection conn=null;
    PreparedStatement ps=null;
    int res=0;

    try {
        //注册+连接+获取连接对象
         conn = JDBCUtil.getConn();

        //获取state对象与数据库交互
        //state执行sql语句: 双引号和+的作用是将username变成String
        String sql=&quot;INSERT INTO infomation VALUES(NULL,?,?)&quot;;
         ps=conn.prepareStatement(sql);
        ps.setString(1,username);
        ps.setString(2, password);

         res=ps.executeUpdate();

        //遍历读取
        if(res&gt;0) {

            System.out.println(&quot;添加成功&quot;);
        }else {
            System.out.println(&quot;添加失败&quot;);
        }


    } catch (Exception e) {
        e.printStackTrace();
    }finally {
        JDBCUtil.release(ps,conn);
    }
}



（3）单元测试


import org.junit.Test;
import com.qiufeisheng.daoimple.UserDaoImple;

public class TestDemo {

@Test
public void testDao() {

    UserDaoImple user=new UserDaoImple();
    user.findAll();
}


@Test
public void testLogin() {

    UserDaoImple user=new UserDaoImple();
    user.login(&quot;xiaohong&quot;, &quot;456&quot;);
}


@Test
public void testInsert() {

    UserDaoImple user=new UserDaoImple();
    user.insert(&quot;xiaoai&quot;, &quot;789&quot;);
    }
}
</code></pre><p>PreparedStatement实现向数据库删除数据</p>
<pre><code>//接口
public interface UserDao {

/**
 * 查询
 */
void findAll();

void login(String username,String password);

//插入用户名和密码
void insert(String username,String password);

void delete(int id);
}



//实现类的方法：删除数据库的数据
@Override
public void delete(int id) {
    // TODO Auto-generated method stub


    Connection conn=null;
    PreparedStatement ps=null;
    int res=0;

    try {
        //注册+连接+获取连接对象
         conn = JDBCUtil.getConn();

        //获取state对象与数据库交互
        //state执行sql语句: 双引号和+的作用是将username变成String
        String sql=&quot;DELETE FROM infomation WHERE id = ?&quot;;
         ps=conn.prepareStatement(sql);
        ps.setInt(1,id);


         res=ps.executeUpdate();

        //遍历读取
        if(res&gt;0) {

            System.out.println(&quot;删除成功&quot;);
        }else {
            System.out.println(&quot;删除失败&quot;);
        }


    } catch (Exception e) {
        e.printStackTrace();
    }finally {
        JDBCUtil.release(ps,conn);
    }
}




//单元测试
@Test
public void testDelete() {

    UserDaoImple user=new UserDaoImple();
    user.delete(3);
}
</code></pre><p>PreparedStatement实现向数据更新修改数据</p>
<pre><code>//（1）接口
public interface UserDao {

/**
 * 查询
 */
void findAll();

void login(String username,String password);

//插入用户名和密码
void insert(String username,String password);

//删除数据
void delete(int id);

void update(int id,String name);
}




//（2）实现类：更新数据==修改数据
@Override
public void update(int id, String name) {
    // TODO Auto-generated method stub


    Connection conn=null;
    PreparedStatement ps=null;
    int res=0;

    try {
        //注册+连接+获取连接对象
         conn = JDBCUtil.getConn();

        //获取state对象与数据库交互
        //state执行sql语句: 双引号和+的作用是将username变成String
        String sql=&quot;UPDATE infomation SET username=? WHERE id=?&quot;;
         ps=conn.prepareStatement(sql);
        ps.setString(1,name);
        ps.setInt(2,id);

         res=ps.executeUpdate();

        //遍历读取
        if(res&gt;0) {

            System.out.println(&quot;更新修改数据成功&quot;);
        }else {
            System.out.println(&quot;更新修改数据失败&quot;);
        }


    } catch (Exception e) {
        e.printStackTrace();
    }finally {
        JDBCUtil.release(ps,conn);
    }

}


//单元测试
@Test
public void testUpdate() {

    UserDaoImple user=new UserDaoImple();
    user.update(1, &quot;xiaofei&quot;);
}
</code></pre><h4 id="PrepareStatement总结"><a href="#PrepareStatement总结" class="headerlink" title="PrepareStatement总结"></a>PrepareStatement总结</h4><blockquote>
<p>该对象就是替换前面的statement对象。</p>
</blockquote>
<ol>
<li>相比较以前的statement， 预先处理给定的sql语句，对其执行语法检查。 在sql语句里面使用 ? 占位符来替代后续要传递进来的变量。 后面进来的变量值，将会被看成是字符串，不会产生任何的关键字。</li>
</ol>
<pre><code>String sql = &quot;insert into t_user values(null , ? , ?)&quot;;
 ps = conn.prepareStatement(sql);

 //给占位符赋值 从左到右数过来，1 代表第一个问号， 永远你是1开始。
 ps.setString(1, userName);
 ps.setString(2, password);
</code></pre><p>###总结：</p>
<ol>
<li><p>JDBC入门</p>
</li>
<li><p>抽取工具类  ###</p>
</li>
<li><p>Statement CRUD ###</p>
<pre><code>演练crud
</code></pre></li>
<li><p>Dao模式  ###</p>
<pre><code>声明与实现分开
</code></pre></li>
<li><p>PrepareStament CRUD ###</p>
<pre><code>预处理sql语句，解决上面statement出现的问题
</code></pre></li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/03/10/MySQL基础Demo/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="QiuFeisheng">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="QiuFeisheng'Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/03/10/MySQL基础Demo/" itemprop="url">后台01：MySQL的基础Demo</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-03-10T00:00:00+08:00">
                2019-03-10
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="1、视角"><a href="#1、视角" class="headerlink" title="1、视角"></a>1、视角</h3><p>（1）一行数据==一条记录==一个对象==多个字段（列，属性）</p>
<p>（2）主键要求==定位每一条记录==几乎不要修改==所以不要带业务==自定义id==BIGINT(且不能是null)</p>
<p>（3）联合主键也可以理解，N个字段不要全部相同即可，不过很少用，因为关系复杂</p>
<p>（4）系数据库通过外键可以实现一对多、多对多和一对一的关系。外键既可以通过数据库来约束，也可以不设置约束，仅依靠应用程序的逻辑来保证。</p>
<p>（5）通过对数据库表创建索引，可以提高查询速度；缺点是插入更新数据慢</p>
<p>（6）通过创建唯一索引，可以保证某一列的值具有唯一性，例如身份证列</p>
<h3 id="2、基本查询：-查询所有的行与列-查询某个表的所有数据"><a href="#2、基本查询：-查询所有的行与列-查询某个表的所有数据" class="headerlink" title="2、基本查询： 查询所有的行与列==查询某个表的所有数据"></a>2、基本查询： 查询所有的行与列==查询某个表的所有数据</h3><pre><code>SELECT * FROM 表名     //*代表所有
</code></pre><p>SELECT * FROM students</p>
<p> <img src="/2019/03/10/MySQL基础Demo/1.png" alt></p>
<h3 id="3、条件查询：查询某个表中符合某条件的数据"><a href="#3、条件查询：查询某个表中符合某条件的数据" class="headerlink" title="3、条件查询：查询某个表中符合某条件的数据"></a>3、条件查询：查询某个表中符合某条件的数据</h3><pre><code>SELECT * FROM 表名 WHERE 条件表达式
</code></pre><p>SELECT * FROM students WHERE score &gt;= 80;</p>
<p>SELECT * FROM students WHERE score &lt;&gt; 80;  <strong>//不等于80</strong></p>
<p>SELECT * FROM students WHERE score &gt;= 80 AND gender = ‘M’;</p>
<p>SELECT * FROM students WHERE NOT class_id = 2;</p>
<p>SELECT * FROM students WHERE (score &lt; 80 OR score &gt; 90) AND gender = ‘M’;</p>
<p>SELECT * FROM students WHERE score &gt;= 60 AND score &lt;= 90；</p>
<p>SELECT * FROM students WHERE score BETWEEN 60 AND 90；</p>
<p> <img src="/2019/03/10/MySQL基础Demo/2.png" alt></p>
<h3 id="4、投影查询：查询特定某几列的数据（显示的时候还可以改列名）"><a href="#4、投影查询：查询特定某几列的数据（显示的时候还可以改列名）" class="headerlink" title="4、投影查询：查询特定某几列的数据（显示的时候还可以改列名）"></a>4、投影查询：查询特定某几列的数据（显示的时候还可以改列名）</h3><pre><code>SELECT 字段1列名，字段2列名，字段3列名 FROM 表名 （WHERE表达式）

SELECT 字段1列名 改名1，字段2列名，字段3列名 FROM 表名 （WHERE表达式）
</code></pre><p>SELECT id, score points, name FROM students;</p>
<p>SELECT id, score points, name FROM students WHERE gender = ‘M’;</p>
<p> <img src="/2019/03/10/MySQL基础Demo/3.png" alt></p>
<h3 id="5、排序查询：安装某个条件排序后显示出来"><a href="#5、排序查询：安装某个条件排序后显示出来" class="headerlink" title="5、排序查询：安装某个条件排序后显示出来"></a>5、排序查询：安装某个条件排序后显示出来</h3><pre><code>SELECT ......ORDER BY （例如列名） DESC(降序/默认ASC升序）
</code></pre><p>SELECT id, name, gender, score FROM students ORDER BY score;</p>
<p>SELECT id, name, gender, score FROM students ORDER BY score DESC;</p>
<p>SELECT id, name, gender, score FROM students ORDER BY score DESC, gender;</p>
<p>SELECT id, name, gender, score FROM students WHERE class_id = 1 ORDER BY score DESC;</p>
<p> <img src="/2019/03/10/MySQL基础Demo/4.png" alt></p>
<h3 id="6、分页查询：把数据分成A页，从索引为B查询到所在页截至"><a href="#6、分页查询：把数据分成A页，从索引为B查询到所在页截至" class="headerlink" title="6、分页查询：把数据分成A页，从索引为B查询到所在页截至"></a>6、分页查询：把数据分成A页，从索引为B查询到所在页截至</h3><pre><code>LIMT 每页的数据条数 OFFSET 当前索引开始查
</code></pre><p>SELECT id, name, gender, score FROM students ORDER BY score DESC LIMIT 3 OFFSET 0;</p>
<p>SELECT id, name, gender, score FROM students ORDER BY score DESC LIMIT 3 OFFSET 0;</p>
<p>SELECT id, name, gender, score FROM students ORDER BY score DESC LIMIT 3 OFFSET 0;</p>
<p> <img src="/2019/03/10/MySQL基础Demo/5.png" alt></p>
<h3 id="7、聚合查询：计算总数、合计值、平均值、最大值和最小值"><a href="#7、聚合查询：计算总数、合计值、平均值、最大值和最小值" class="headerlink" title="7、聚合查询：计算总数、合计值、平均值、最大值和最小值"></a>7、聚合查询：计算总数、合计值、平均值、最大值和最小值</h3><p>总行数==总数据量</p>
<pre><code>SELECT COUNT(*) FROM students;
SELECT COUNT(*) number FROM students;  //设置别名
</code></pre><p> <img src="/2019/03/10/MySQL基础Demo/6.png" alt></p>
<pre><code>SELECT COUNT(*) boys FROM students WHERE gender = &apos;M&apos;; //为M的总行数
</code></pre><p>  <img src="/2019/03/10/MySQL基础Demo/7.png" alt></p>
<pre><code>SELECT AVG(score) average FROM students WHERE gender = &apos;M&apos;;//男生的总平均数
</code></pre><p>  <img src="/2019/03/10/MySQL基础Demo/8.png" alt></p>
<p>如果聚合查询的WHERE条件没有匹配到任何行，COUNT()会返回0，而SUM()、AVG()、MAX()和MIN()会返回NULL：</p>
<pre><code>SELECT class_id, COUNT(*) num FROM students GROUP BY class_id;//每个班的总数，而且还显示了班的id
</code></pre><p>  <img src="/2019/03/10/MySQL基础Demo/9.png" alt></p>
<h3 id="8、多表查询：使用多表查询可以获取M-x-N行记录；一对多的拼接"><a href="#8、多表查询：使用多表查询可以获取M-x-N行记录；一对多的拼接" class="headerlink" title="8、多表查询：使用多表查询可以获取M x N行记录；一对多的拼接"></a>8、多表查询：使用多表查询可以获取M x N行记录；一对多的拼接</h3><pre><code>SELECT * FROM students, classes;

SELECT students.id sid,students.name,students.gender,students.score,classes.id cid,classes.name cname FROM students, classes;

SELECT s.id sid, s.name,s.gender,s.score,c.id cid, c.name cname FROM students s, classes c WHERE s.gender = &apos;M&apos; AND c.id = 1;
</code></pre><p>  <img src="/2019/03/10/MySQL基础Demo/10.png" alt></p>
<h3 id="9、连接查询：我们希望结果集同时包含所在班级的名称，上面的结果集只有class-id列，缺少对应班级的name列。存放班级名称的name列存储在classes表中。"><a href="#9、连接查询：我们希望结果集同时包含所在班级的名称，上面的结果集只有class-id列，缺少对应班级的name列。存放班级名称的name列存储在classes表中。" class="headerlink" title="9、连接查询：我们希望结果集同时包含所在班级的名称，上面的结果集只有class_id列，缺少对应班级的name列。存放班级名称的name列存储在classes表中。"></a>9、连接查询：我们希望结果集同时包含所在班级的名称，上面的结果集只有class_id列，缺少对应班级的name列。存放班级名称的name列存储在classes表中。</h3><pre><code>SELECT s.id, s.name, s.class_id, c.name class_name, s.gender, s.score FROM students s INNER JOIN classes c ON s.class_id = c.id;
</code></pre><p>   <img src="/2019/03/10/MySQL基础Demo/11.png" alt></p>
<h3 id="10、INSERT插入数据"><a href="#10、INSERT插入数据" class="headerlink" title="10、INSERT插入数据"></a>10、INSERT插入数据</h3><pre><code>INSERT INTO 表名 （字段列1,字段列名2，字段列名3）VALUES(值1，值2，值3)

INSERT INTO students (class_id, name, gender, score) VALUES (1, &apos;大宝&apos;, &apos;M&apos;, 87)，(2, &apos;二宝&apos;, &apos;M&apos;, 81);

SELECT * FROM students;
</code></pre><p>   <img src="/2019/03/10/MySQL基础Demo/12.png" alt></p>
<h3 id="11、UPDATE更新数据：我们就可以一次更新表中的一条或多条记录。"><a href="#11、UPDATE更新数据：我们就可以一次更新表中的一条或多条记录。" class="headerlink" title="11、UPDATE更新数据：我们就可以一次更新表中的一条或多条记录。"></a>11、UPDATE更新数据：我们就可以一次更新表中的一条或多条记录。</h3><pre><code>UPDATE 表名 SET 字段1=值1, 字段2=值2 WHERE 条件;


UPDATE students SET name=&apos;大牛&apos;, score=66 WHERE id=1;
SELECT * FROM students WHERE id=1;


UPDATE students SET name=&apos;小牛&apos;, score=77 WHERE id&gt;=5 AND id&lt;=7;
SELECT * FROM students;
</code></pre><p> <img src="/2019/03/10/MySQL基础Demo/13.png" alt></p>
<h3 id="12、DELETE删除数据：删除符合条件的行数据"><a href="#12、DELETE删除数据：删除符合条件的行数据" class="headerlink" title="12、DELETE删除数据：删除符合条件的行数据"></a>12、DELETE删除数据：删除符合条件的行数据</h3><pre><code>DELETE FROM 表名 WHERE 条件;

DELETE FROM students WHERE id=1;
SELECT * FROM students;

DELETE FROM students WHERE id&gt;=5 AND id&lt;=7;
-- 查询并观察结果:
SELECT * FROM students;
</code></pre><p> <img src="/2019/03/10/MySQL基础Demo/14.png" alt></p>
<h3 id="13、管理MySQL"><a href="#13、管理MySQL" class="headerlink" title="13、管理MySQL"></a>13、管理MySQL</h3><p> <img src="/2019/03/10/MySQL基础Demo/15.png" alt></p>
<p> <img src="/2019/03/10/MySQL基础Demo/16.png" alt></p>
<p> <img src="/2019/03/10/MySQL基础Demo/17.png" alt></p>
<p> <img src="/2019/03/10/MySQL基础Demo/18.png" alt></p>
<p> <img src="/2019/03/10/MySQL基础Demo/19.png" alt></p>
<p> <img src="/2019/03/10/MySQL基础Demo/20.png" alt></p>
<p> <img src="/2019/03/10/MySQL基础Demo/21.png" alt></p>
<h3 id="14、常用SQL语句"><a href="#14、常用SQL语句" class="headerlink" title="14、常用SQL语句"></a>14、常用SQL语句</h3><p>1、插入和替换</p>
<pre><code>REPLACE INTO students (id, class_id, name, gender, score) VALUES (1, 1, &apos;小明&apos;, &apos;F&apos;, 99);
</code></pre><p>2、插入或更新</p>
<pre><code>INSERT INTO students (id, class_id, name, gender, score) VALUES (1, 1, &apos;小明&apos;, &apos;F&apos;, 99) ON DUPLICATE KEY UPDATE name=&apos;小明&apos;, gender=&apos;F&apos;, score=99;
</code></pre><p>3、插入或忽略</p>
<pre><code>INSERT IGNORE INTO students (id, class_id, name, gender, score) VALUES (1, 1, &apos;小明&apos;, &apos;F&apos;, 99);
</code></pre><p>4、快照（copy）</p>
<pre><code>-- 对class_id=1的记录进行快照，并存储为新表students_of_class1:
CREATE TABLE students_of_class1 SELECT * FROM students WHERE class_id=1;
</code></pre><p>5、写入查询结果集</p>
<pre><code>CREATE TABLE statistics (
    id BIGINT NOT NULL AUTO_INCREMENT,
    class_id BIGINT NOT NULL,
    average DOUBLE NOT NULL,
    PRIMARY KEY (id)
);

INSERT INTO statistics (class_id, average) SELECT class_id, AVG(score) FROM students GROUP BY class_id;
</code></pre><p> <img src="/2019/03/10/MySQL基础Demo/22.png" alt></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/03/09/React基础Demo/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="QiuFeisheng">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="QiuFeisheng'Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/03/09/React基础Demo/" itemprop="url">前端03：React的基础Demo</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-03-09T00:00:00+08:00">
                2019-03-09
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>（一句话浓缩）</p>
<h3 id="1、React是FaceBook封装好的JS库（框架），主要用于快速高效写用户界面，是MVC中的View"><a href="#1、React是FaceBook封装好的JS库（框架），主要用于快速高效写用户界面，是MVC中的View" class="headerlink" title="1、React是FaceBook封装好的JS库（框架），主要用于快速高效写用户界面，是MVC中的View"></a>1、React是FaceBook封装好的JS库（框架），主要用于快速高效写用户界面，是MVC中的View</h3><p> <img src="/2019/03/09/React基础Demo/1.png" alt></p>
<h3 id="2、React是一个非常流行的框架，BAT也用，学一学有价值"><a href="#2、React是一个非常流行的框架，BAT也用，学一学有价值" class="headerlink" title="2、React是一个非常流行的框架，BAT也用，学一学有价值"></a>2、React是一个非常流行的框架，BAT也用，学一学有价值</h3><p><img src="/2019/03/09/React基础Demo/2.png" alt></p>
<h3 id="3、create-react-app就是一个官方开发工具，目的是可以在new-Project的时候帮助我们配置好Project的各种文件，提高创建Project的效率"><a href="#3、create-react-app就是一个官方开发工具，目的是可以在new-Project的时候帮助我们配置好Project的各种文件，提高创建Project的效率" class="headerlink" title="3、create-react-app就是一个官方开发工具，目的是可以在new Project的时候帮助我们配置好Project的各种文件，提高创建Project的效率"></a>3、create-react-app就是一个官方开发工具，目的是可以在new Project的时候帮助我们配置好Project的各种文件，提高创建Project的效率</h3><h3 id="4、React的一个自定义组件（类似Android最简单的自定义view）"><a href="#4、React的一个自定义组件（类似Android最简单的自定义view）" class="headerlink" title="4、React的一个自定义组件（类似Android最简单的自定义view）"></a>4、React的一个自定义组件（类似Android最简单的自定义view）</h3><p>(1)improt React from ‘react’</p>
<p>(2)extends React.Component</p>
<p>(3)render(){  返回HTML渲染效果}</p>
<p>(4)export default Welcome</p>
<p>(5)index.js中 import Welcome</p>
<p>(6)index.js中的ReactDOM传入Welcome组件显示出来</p>
<p>Demo***</p>
<p><strong>Welcome.js</strong></p>
<pre><code>import React from &apos;react&apos;

class Welcome extends React.Component{


    render() {

        return &lt;h1&gt;Hello World&lt;/h1&gt;
    }
}

export default Welcome
</code></pre><p><strong>index.js</strong></p>
<pre><code>import React from &apos;react&apos;;
import ReactDOM from &apos;react-dom&apos;;
import &apos;./index.css&apos;;
import App from &apos;./App&apos;;
import Welcome from &apos;./Welcome&apos;;
import * as serviceWorker from &apos;./serviceWorker&apos;;

ReactDOM.render(&lt;Welcome /&gt;, document.getElementById(&apos;root&apos;));

// If you want your app to work offline and load faster, you can change
// unregister() to register() below. Note this comes with some pitfalls.
// Learn more about service workers: https://bit.ly/CRA-PWA
serviceWorker.unregister();
</code></pre><p> <img src="/2019/03/09/React基础Demo/3.png" alt></p>
<h3 id="5、render（）函数里面写的就是JSX代码，JSX特点如下："><a href="#5、render（）函数里面写的就是JSX代码，JSX特点如下：" class="headerlink" title="5、render（）函数里面写的就是JSX代码，JSX特点如下："></a>5、render（）函数里面写的就是JSX代码，JSX特点如下：</h3><p> <img src="/2019/03/09/React基础Demo/4.png" alt></p>
<p> <img src="/2019/03/09/React基础Demo/5.png" alt></p>
<p>（1）JSX里面的“特殊HTML”本质上是被编译成了React.createElement()方法，返回JS的对象，就是DOM对象，然后就可以渲染显示出来，所以最终还是通过DOM节点来显示的：HTML—》React.createElement()—》DOM</p>
<p><strong>Demo***</strong></p>
<pre><code>import React from &apos;react&apos;

class Welcome extends React.Component{


    render() {

        return(
        &lt;div&gt;
        &lt;h1&gt;Hello React&lt;/h1&gt;
        &lt;/div&gt;
        )
    }
}
export default Welcome
</code></pre><p>return里面的代码可以替换成React.createElement()</p>
<p> <img src="/2019/03/09/React基础Demo/6.png" alt></p>
<h3 id="6、React的属性props"><a href="#6、React的属性props" class="headerlink" title="6、React的属性props"></a>6、React的属性props</h3><p> <img src="/2019/03/09/React基础Demo/7.png" alt></p>
<p><strong>Demo***</strong></p>
<p>  <img src="/2019/03/09/React基础Demo/8.png" alt></p>
<p>自定义组件：NameCard.js</p>
<pre><code>import React from &apos;react&apos;

class NameCard extends React.Component{

    render() {

        //定义声明属性:JSX的写法：标签&lt;&gt;嵌套{ }
        const {name,number,isHuman, tags}=this.props;
        return(

            &lt;div className=&apos;alert alert-success&apos;&gt;
                &lt;h4 className=&apos;alert-heading&apos;&gt;{name}&lt;/h4&gt;

                &lt;ul&gt;

                    &lt;li&gt;电话：{number}&lt;/li&gt;
                    &lt;li&gt;{isHuman?&apos;人类&apos; : &apos;外星人&apos;}&lt;/li&gt;
                    &lt;hr/&gt;

                    &lt;p&gt;
                        {tags.map((tag,index)=&gt;(
                            &lt;span className=&apos;badge badge-pill badge-primary&apos; key={index}&gt;{tag}&lt;/span&gt;
                        ))}
                    &lt;/p&gt;
                &lt;/ul&gt;

            &lt;/div&gt;
                    )

    }
}

export default NameCard;
</code></pre><p>在组件Welcome.js中引入NameCard组件，并将数据通过props填充到NameCard显示出来</p>
<pre><code>import React from &apos;react&apos;
import NameCard from &apos;./components/NameCard&apos;
const tags=[&apos;恐龙&apos;,&apos;美女&apos;]

class Welcome extends React.Component{


    render() {
        return(
         &lt;div&gt;

         &lt;h1&gt;Hello React&lt;/h1&gt;
         &lt;NameCard name=&apos;King&apos; number={123456789} isHuman tags={tags} /&gt;

        &lt;/div&gt;
        )
    }
}
export default Welcome
</code></pre><p>在index.js中引入Welcome组件</p>
<pre><code>import React from &apos;react&apos;;
import ReactDOM from &apos;react-dom&apos;;
import &apos;./index.css&apos;;
import App from &apos;./App&apos;;
import Welcome from &apos;./Welcome&apos;;
import * as serviceWorker from &apos;./serviceWorker&apos;;
import &apos;bootstrap/dist/css/bootstrap.min.css&apos;

ReactDOM.render(&lt;Welcome /&gt;, document.getElementById(&apos;root&apos;));

serviceWorker.unregister();
</code></pre><p>Demo总结：</p>
<p>（1）Props（属性），组件—函数，输入—输出，V = f(props)</p>
<p>（2）const和props声明属性; props是view的输入，render是view的输出</p>
<p>（3）然后借用html&lt;&gt; + { }写好整个组件的view，data可以先不赋值，用props代替，然后在特定地方引用的时候才开始将Data存储到组件显示出来就可以了，例如：</p>
<pre><code>&lt;NameCard name=&apos;King&apos; number={123456789} isHuman tags={tags} /&gt; //有点类似setter的写法
</code></pre><h3 id="7、React的状态state"><a href="#7、React的状态state" class="headerlink" title="7、React的状态state"></a>7、React的状态state</h3><p>：只能用setState()来修改state的值</p>
<p>  <img src="/2019/03/09/React基础Demo/9.png" alt></p>
<p><strong>Demo***</strong></p>
<p>(1)自定义LikesButton.js</p>
<pre><code>import React from &apos;react&apos;

class LikesButton extends React.Component{


    constructor(pros){
        super(pros);
        this.state={
            likes:0
        }
    }

    render() {

        return(

            &lt;div className=&apos;likes-button-component&apos;&gt;

                &lt;button
                    type=&apos;button&apos;
                    className=&quot;btn btn-outline-primary btn-lg&quot;
                    onClick={()=&gt;{this.increaseLikes()}}
                &gt;
                    {this.state.likes}
                &lt;/button&gt;
            &lt;/div&gt;
        )
    }

    increaseLikes() {

        this.setState({
            likes:++this.state.likes
        })
    }
}
export default LikesButton
</code></pre><p>(2)引入LikesButton组件</p>
<pre><code>import React from &apos;react&apos;
import LikesButton from &apos;./components/LikesButton&apos;

class Welcome extends React.Component{


    render() {
        return(
         &lt;div&gt;

         &lt;h1&gt;Hello React&lt;/h1&gt;
        &lt;LikesButton/&gt;

        &lt;/div&gt;
        )
    }
}
export default Welcome
</code></pre><p> <img src="/2019/03/09/React基础Demo/10.png" alt></p>
<p>点击后就会一直动态改变likes的值</p>
<h3 id="8、React的生命周期"><a href="#8、React的生命周期" class="headerlink" title="8、React的生命周期"></a>8、React的生命周期</h3><p> <img src="/2019/03/09/React基础Demo/11.png" alt></p>
<p> <img src="/2019/03/09/React基础Demo/12.png" alt></p>
<p><strong>Demo***</strong></p>
<p>DigitalClock.js</p>
<pre><code>import React from &apos;react&apos;

class DigitalClock extends React.Component{

constructor(props){

    super(props)
    this.state={
        date: new Date()
    }
}
componentDidMount(){

    this.timer=setInterval(()=&gt;{
        this.setState({
            date:new Date()
        })
    })
}

componentWillUnmount(){
    clearInterval(this.timer)
}


componentDidUpdate(prevProps, prevState) {
    console.log(prevState)
}


render() {

    return(

        &lt;div className=&apos;digital-clock-component jumbotron&apos;&gt;

            &lt;h1&gt;
                {this.state.date.toLocaleTimeString()}
            &lt;/h1&gt;
        &lt;/div&gt;
    )
}

}

export default DigitalClock
</code></pre><p>Welcome.js<br>    import React from ‘react’<br>    import DigitalClock from ‘./components/DigitalClock’</p>
<pre><code>class Welcome extends React.Component{


render() {
    return(
     &lt;div&gt;

     &lt;h1&gt;Hello React&lt;/h1&gt;
    &lt;DigitalClock/&gt;

    &lt;/div&gt;
    )
}
}
export default Welcome
</code></pre><p>  <img src="/2019/03/09/React基础Demo/13.png" alt></p>
<h3 id="9、React表单"><a href="#9、React表单" class="headerlink" title="9、React表单"></a>9、React表单</h3><p> <img src="/2019/03/09/React基础Demo/14.png" alt></p>
<p>非受控组件-数据保存在DOM节点中<br>Demo***</p>
<pre><code>import React from &apos;react&apos;

class CommentBox extends React.Component{

constructor(props){
    super(props)
    this.handleSubmit=this.handleSubmit.bind(this)
}

handleSubmit(event){
    alert(this.textInput.value)
    event.preventDefault()
}

render() {

    return(

        &lt;form className=&apos;p-5&apos; onSubmit={this.handleSubmit}&gt;
            &lt;div className=&apos;form-group&apos;&gt;
                &lt;label&gt;留言内容&lt;/label&gt;
               &lt;input
                    type=&apos;text&apos;
                    className=&apos;form-control&apos;
                    placeholder=&apos;请输入内容&apos;
                   ref={(textInput)=&gt;{this.textInput=textInput}}
               /&gt;
            &lt;/div&gt;

            &lt;button type=&apos;submit&apos; className=&apos;btn btn-primary&apos;&gt;
                留言
            &lt;/button&gt;

        &lt;/form&gt;
    )
}

}

export default CommentBox
</code></pre><p>附加：当一个组件没有生命周期和state的时候，可以写成一个function的形式，更加容易阅读</p>
<h3 id="10、留言板Demo"><a href="#10、留言板Demo" class="headerlink" title="10、留言板Demo"></a>10、留言板Demo</h3><p> <img src="/2019/03/09/React基础Demo/15.png" alt><br> <img src="/2019/03/09/React基础Demo/16.png" alt></p>
<p>Demo***</p>
<p>CommentList.js</p>
<pre><code>import React from &apos;react&apos;

const CommentList=({comments})=&gt;{

    return(

        &lt;div className=&apos;comment-list-component&apos;&gt;

        &lt;label&gt;评论列表&lt;/label&gt;

        &lt;ul className=&apos;list-group mb-3&apos;&gt;
            {

                comments.map((comment,index)=&gt;
                    &lt;li key={index} className=&quot;list-group-item&quot;&gt;{comment}&lt;/li&gt;
                )
            }
        &lt;/ul&gt;
    &lt;/div&gt;
)
}

export default CommentList
</code></pre><p>CommentBox.js</p>
<pre><code>import React from &apos;react&apos;

class CommentBox extends React.Component{

constructor(props){
    super(props)
    this.handleSubmit=this.handleSubmit.bind(this)
}

handleSubmit(event){

    this.props.onAddComment(this.textInput.value)
    event.preventDefault()
}

render() {

    return(

        &lt;form className=&apos;p-5&apos; onSubmit={this.handleSubmit}&gt;
            &lt;div className=&apos;form-group&apos;&gt;
                &lt;label&gt;留言内容&lt;/label&gt;
               &lt;input
                    type=&apos;text&apos;
                    className=&apos;form-control&apos;
                    placeholder=&apos;请输入内容&apos;
                   ref={(textInput)=&gt;{this.textInput=textInput}}
               /&gt;
            &lt;/div&gt;

            &lt;button type=&apos;submit&apos; className=&apos;btn btn-primary&apos;&gt;
                留言
            &lt;/button&gt;

            &lt;p&gt;已有{this.props.commentsLength}条评论&lt;/p&gt;

        &lt;/form&gt;
    )
}

}

export default CommentBox
</code></pre><p>App.js</p>
<pre><code>import React from &apos;react&apos;;
import logo from &apos;./logo.svg&apos;;
import &apos;./App.css&apos;;
import CommentList from &apos;./components/CommentList&apos;
import CommentBox from &quot;./components/CommentBox&quot;;


class App extends React.Component{

      constructor(props){
super(props)
this.state={
  comments:[&apos;this is my first comment&apos;]
}

this.addComment=this.addComment.bind(this)
  }

  addComment(comment){

this.setState({
   comments: [...this.state.comments,comment]
})
  }

  render() {

const {comments}=this.state
return(
    &lt;div className=&apos;App&apos;&gt;

  &lt;header className=&apos;App-header&apos;&gt;
    &lt;img src={logo} className=&apos;App-logo&apos; alt=&apos;logo&apos;/&gt;
    &lt;h1 className=&apos;App-title&apos;&gt;Welcome to React&lt;/h1&gt;

  &lt;/header&gt;

      &lt;CommentList comments={comments}/&gt;
      &lt;CommentBox
          commentsLength={comments.length}
          onAddComment={this.addComment}
      /&gt;

&lt;/div&gt;
)

  }

}

export default App;
</code></pre><h3 id="11、Context-Demo：目的是为了解决数据多层传递的问题，props不太方便，Context会相对更加方便"><a href="#11、Context-Demo：目的是为了解决数据多层传递的问题，props不太方便，Context会相对更加方便" class="headerlink" title="11、Context Demo：目的是为了解决数据多层传递的问题，props不太方便，Context会相对更加方便"></a>11、Context Demo：目的是为了解决数据多层传递的问题，props不太方便，Context会相对更加方便</h3><p> <img src="/2019/03/09/React基础Demo/17.png" alt></p>
<p> <img src="/2019/03/09/React基础Demo/18.png" alt></p>
<p>Demo***</p>
<p>theme-context.js</p>
<pre><code>import React from &apos;react&apos;

const ThemeContext=React.createContext()

export default ThemeContext
</code></pre><p>ThemeBar.js</p>
<pre><code>import React from &apos;react&apos;
import ThemeContext from &apos;../theme-context&apos;


const ThemeBar=()=&gt;{

return(

    &lt;ThemeContext.Consumer&gt;{

        theme=&gt;{
           return(

               &lt;div
                   className=&apos;alert mt-5&apos;
                   style={{backgroundColor:theme.bgColor,
                       color:theme.color}}&gt;

                   样式区域
                   &lt;button className={theme.classnames}&gt;
                       样式按钮
                   &lt;/button&gt;
               &lt;/div&gt;
           )
        }
    }
    &lt;/ThemeContext.Consumer&gt;
)
}

export default ThemeBar
</code></pre><p>App.js</p>
<pre><code>import React from &apos;react&apos;;
import logo from &apos;./logo.svg&apos;;
import &apos;./App.css&apos;;
import ThemeContext from &apos;./theme-context&apos;
import ThemeBar from &apos;./components/ThemeBar&apos;


const themes={

  light:{
classnames:&apos;btn btn-primary&apos;,
bgColor:&apos;#eeeeee&apos;,
color:&apos;#000&apos;
  },
  dark:{
classnames: &apos;btn btn-light&apos;,
bgColor: &apos;#222222&apos;,
color:&apos;#fff&apos;
  },
}

class App extends React.Component{

  constructor(props){
super(props)
this.state={
  theme: &apos;light&apos;
}

this.changeTheme=this.changeTheme.bind(this)
  }

changeTheme(theme){

this.setState({
  theme,
})
}

  render() {

return(
    &lt;ThemeContext.Provider value={themes[this.state.theme]}&gt;
    &lt;div className=&apos;App&apos;&gt;

  &lt;header className=&apos;App-header&apos;&gt;
    &lt;img src={logo} className=&apos;App-logo&apos; alt=&apos;logo&apos;/&gt;
    &lt;h1 className=&apos;App-title&apos;&gt;Welcome to React&lt;/h1&gt;
    &lt;a href=&apos;#theme-switcher&apos;
        className=&apos;btn btn-light&apos;
    onClick={()=&gt;{this.changeTheme(&apos;light&apos;)}}
    &gt;
    浅色主题
    &lt;/a&gt;

      &lt;a href=&apos;#theme-switcher&apos;
         className=&apos;btn btn-secondary&apos;
         onClick={()=&gt;{this.changeTheme(&apos;dark&apos;)}}
         &gt;
        深色主题
      &lt;/a&gt;

  &lt;/header&gt;
      &lt;ThemeBar/&gt;

&lt;/div&gt;
    &lt;/ThemeContext.Provider&gt;
)

  }

}

export default App;
</code></pre><hr>
<h2 id="棋盘井字游戏"><a href="#棋盘井字游戏" class="headerlink" title="棋盘井字游戏"></a>棋盘井字游戏</h2><p> <img src="/2019/03/09/React基础Demo/19.png" alt></p>
<p>Demo代码***</p>
<p>(1)Square.js</p>
<pre><code>import React from &apos;react&apos;

function Square(props) {
return (
    &lt;button className=&quot;square&quot; onClick={props.onClick}&gt;
        {props.value}
    &lt;/button&gt;
);
}

export default Square
</code></pre><p>(2)Board.js</p>
<pre><code>import React from &apos;react&apos;
import Square from &apos;./Square&apos;
import calculateWinner from &apos;./CalculateWinner&apos;

class Board extends React.Component {
renderSquare(i) {
    return (
        &lt;Square
            value={this.props.squares[i]}
            onClick={() =&gt; this.props.onClick(i)}
        /&gt;
    );
}

render() {
    return (
        &lt;div&gt;
            &lt;div className=&quot;board-row&quot;&gt;
                {this.renderSquare(0)}
                {this.renderSquare(1)}
                {this.renderSquare(2)}
            &lt;/div&gt;
            &lt;div className=&quot;board-row&quot;&gt;
                {this.renderSquare(3)}
                {this.renderSquare(4)}
                {this.renderSquare(5)}
            &lt;/div&gt;
            &lt;div className=&quot;board-row&quot;&gt;
                {this.renderSquare(6)}
                {this.renderSquare(7)}
                {this.renderSquare(8)}
            &lt;/div&gt;
        &lt;/div&gt;
    );
}
}

export default Board
</code></pre><p>(3)Game.js</p>
<pre><code>import React from &apos;react&apos;
import Board from &apos;./Board&apos;
import calculateWinner from &apos;./CalculateWinner&apos;

class Game extends React.Component {

constructor(props) {
    super(props);
    this.state = {
        history: [{
            squares: Array(9).fill(null)
        }],
        stepNumber: 0,
        xIsNext: true
    };
}

handleClick(i) {
    const history = this.state.history.slice(0, this.state.stepNumber + 1);
    const current = history[history.length - 1];
    const squares = current.squares.slice();
    if (calculateWinner(squares) || squares[i]) {
        return;
    }
    squares[i] = this.state.xIsNext ? &apos;X&apos; : &apos;O&apos;;
    this.setState({
        history: history.concat([{
            squares: squares
        }]),
        stepNumber: history.length,
        xIsNext: !this.state.xIsNext,
    });
}


jumpTo(step) {
    this.setState({
        stepNumber: step,
        xIsNext: (step % 2) === 0,
    });
}


render() {
    const history = this.state.history;
    const current = history[this.state.stepNumber];
    const winner = calculateWinner(current.squares);


    const moves = history.map((step, move) =&gt; {
        const desc = move ?
            &apos;Go to move #&apos; + move :
            &apos;Go to game start&apos;;
        return (
            &lt;li key={move}&gt;
                &lt;button onClick={() =&gt; this.jumpTo(move)}&gt;{desc}&lt;/button&gt;
            &lt;/li&gt;
        );
    });






    let status;
    if (winner) {
        status = &apos;Winner: &apos; + winner;
    } else {
        status = &apos;Next player: &apos; + (this.state.xIsNext ? &apos;X&apos; : &apos;O&apos;);
    }

    return (
        &lt;div className=&quot;game&quot;&gt;
            &lt;div className=&quot;game-board&quot;&gt;
                &lt;Board
                    squares={current.squares}
                    onClick={(i) =&gt; this.handleClick(i)}
                /&gt;
            &lt;/div&gt;
            &lt;div className=&quot;game-info&quot;&gt;
                &lt;div&gt;{status}&lt;/div&gt;
                &lt;ol&gt;{moves}&lt;/ol&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    );
}
}

export default Game
</code></pre><p>(4)CalculateWinner.js</p>
<pre><code>import React from &apos;react&apos;


function calculateWinner(squares) {
const lines = [
    [0, 1, 2],
    [3, 4, 5],
    [6, 7, 8],
    [0, 3, 6],
    [1, 4, 7],
    [2, 5, 8],
    [0, 4, 8],
    [2, 4, 6],
];
for (let i = 0; i &lt; lines.length; i++) {
    const [a, b, c] = lines[i];
    if (squares[a] &amp;&amp; squares[a] === squares[b] &amp;&amp; squares[a] === squares[c]) {
        return squares[a];
    }
}
return null;
}

export default calculateWinner
</code></pre><p>(5)index.js</p>
<pre><code>import React from &apos;react&apos;;
import ReactDOM from &apos;react-dom&apos;;
import &apos;./index.css&apos;;
import * as serviceWorker from &apos;./serviceWorker&apos;;
import &apos;bootstrap/dist/css/bootstrap.min.css&apos;
import Game from &quot;./components/Game&quot;;

ReactDOM.render(&lt;Game /&gt;, document.getElementById(&apos;root&apos;));
serviceWorker.unregister();
</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/6/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><span class="page-number current">7</span><a class="page-number" href="/page/8/">8</a><a class="extend next" rel="next" href="/page/8/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">QiuFeisheng</p>
              <p class="site-description motion-element" itemprop="description">Stay hungry</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">73</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            

            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">QiuFeisheng</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
